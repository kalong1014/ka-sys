// src/utils/axios.ts
import axios from 'axios'

axios.interceptors.request.use(config => {
  // 添加请求头
  const token = localStorage.getItem('token')
  if (token) {
    config.headers.Authorization = `Bearer ${token}`
  }
  return config
})

// 开发环境使用Mock
if (import.meta.env.DEV) {
  axios.interceptors.response.use(response => {
    if (response.config.url?.startsWith('/api')) {
      return import('./mock/data').then(mockData => {
        return { ...response, data: mockData[response.config.url] }
      })
    }
    return response
  })
}